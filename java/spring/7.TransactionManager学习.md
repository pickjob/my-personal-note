# TransactionManager学习
- PlatformTransactionManager
  - AbstractPlatformTransactionManager
    - DataSourceTransactionManager
    - JpaTransactionManager
    - HibernateTransactionManager
    - JtaTransactionManager
    - JmsTransactionManager
    ```java
    public interface PlatformTransactionManager {
        TransactionStatus getTransaction(@Nullable TransactionDefinition definition) throws TransactionException;
        void commit(TransactionStatus status) throws TransactionException;
        void rollback(TransactionStatus status) throws TransactionException;
    }
    public interface TransactionDefinition {
        int PROPAGATION_REQUIRED = 0;
        int PROPAGATION_SUPPORTS = 1;
        int PROPAGATION_MANDATORY = 2;
        int PROPAGATION_REQUIRES_NEW = 3;
        int PROPAGATION_NOT_SUPPORTED = 4;
        int PROPAGATION_NEVER = 5;
        int PROPAGATION_NESTED = 6;

        int ISOLATION_DEFAULT = -1;
        int ISOLATION_READ_UNCOMMITTED = Connection.TRANSACTION_READ_UNCOMMITTED;
        int ISOLATION_READ_COMMITTED = Connection.TRANSACTION_READ_COMMITTED;
        int ISOLATION_REPEATABLE_READ = Connection.TRANSACTION_REPEATABLE_READ;
        int ISOLATION_SERIALIZABLE = Connection.TRANSACTION_SERIALIZABLE;

        int TIMEOUT_DEFAULT = -1;

        int getPropagationBehavior();
        int getIsolationLevel();
        int getTimeout();
        boolean isReadOnly();
        @Nullable
        String getName();
    }
    public interface TransactionStatus extends SavepointManager, Flushable {
        boolean isNewTransaction();
        boolean hasSavepoint();
        void setRollbackOnly();
        boolean isRollbackOnly();
        @Override
        void flush();
        boolean isCompleted();
    }
    @Target({ElementType.METHOD, ElementType.TYPE})
    @Retention(RetentionPolicy.RUNTIME)
    @Inherited
    @Documented
    public @interface Transactional {
        @AliasFor("transactionManager")
        String value() default "";
        @AliasFor("value")
        String transactionManager() default "";

        Propagation propagation() default Propagation.REQUIRED;
        Isolation isolation() default Isolation.DEFAULT;
        int timeout() default TransactionDefinition.TIMEOUT_DEFAULT;
        boolean readOnly() default false;
        Class<? extends Throwable>[] rollbackFor() default {};
        String[] rollbackForClassName() default {};
        Class<? extends Throwable>[] noRollbackFor() default {};
        String[] noRollbackForClassName() default {};
    }
    ```