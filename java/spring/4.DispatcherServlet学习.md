# DispatcherServlet学习
- 相关接口和类
    ```java
    @Import(DelegatingWebMvcConfiguration.class)
    public @interface EnableWebMvc {}
    // DelegatingWebMvcConfiguration继承WebMvcConfigurationSupport
    public class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport {}
    // 实际注册bean类
    public class WebMvcConfigurationSupport implements ApplicationContextAware, ServletContextAware {
        // 注册的bean
        // HandlerMappings:
        //      requestMappingHandlerMapping ordered at 0 for mapping requests to annotated controller methods
        //      viewControllerHandlerMapping ordered at 1 for mapping URL paths directly to view names
        //      beanNameHandlerMapping ordered at 2 for mapping URL paths to controller bean names
        //      resourceHandlerMapping ordered at Integer.MAX_VALUE-1 to serve static resource requests.
        //      defaultServletHandlerMapping ordered at Integer.MAX_VALUE to forward requests to the default servlet.
        // HandlerAdapters:
        //      requestMappingHandlerAdapter for processing requests with annotated controller methods.
        //      httpRequestHandlerAdapter for processing requests with HttpRequestHandlers.
        //      simpleControllerHandlerAdapter for processing requests with interface-based Controllers.
        // ResourceUrlProvider: mvcResourceUrlProvider
        // Validator: mvcValidator
        // PathMatcher: mvcPathMatcher
        // UrlPathHelper: mvcUrlPathHelper
        // ContentNegotiationManager: mvcContentNegotiationManager
        // FormattingConversionService: mvcConversionService
        // CompositeUriComponentsContributor: mvcUriComponentsContributor
        // HandlerExceptionResolver: handlerExceptionResolver
        // ViewResolver: mvcViewResolver
        // HandlerMappingIntrospector: mvcHandlerMappingIntrospector
    }
    public class DispatcherServlet extends FrameworkServlet {
        // 没有配置的类使用DispatcherServlet.properties中提供的类
    	protected void initStrategies(ApplicationContext context) {
            initMultipartResolver(context);
            initLocaleResolver(context);
            initThemeResolver(context);
            initHandlerMappings(context);
            initHandlerAdapters(context);
            initHandlerExceptionResolvers(context);
            initRequestToViewNameTranslator(context);
            initViewResolvers(context);
            initFlashMapManager(context);
        }
    }
    ```
- 处理请求大致流程
    - HttpServlet.service(req, resp)转到doXXX方法
    - FrameworkServlet将doXXX方法覆写,调用processRequest(req, resp),调用processRequest又调用抽象方法doService(req, resp)
    - DispathcerServlet覆写doService(req, resp)