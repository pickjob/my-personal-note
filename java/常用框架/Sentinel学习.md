# Sentinel学
- 基本内容
    - 核心内容
        - 资源
        - 规则
    - 核心使用注解
        - @SentinelResource("HelloWorld")
        - ContextUtil.enter(resourceName, origin)
- 规则
    - FlowRule: 流量控制规则
        - resource: 资源名
        - count: 限流阈值
        - grade: 1-QPS(默认) 0-并发线程
        - limitApp: 针对调用来源(默认default, 不区分)
        - strategy: 0-直接(默认) 1-关联 2-链路
        - controlBehavior: 0-直接拒绝(默认) / 1-WarmUp / 2-RateLimiter / 3-WarmUp + ReateLimiter
        - clusterMode: false(默认)
    - DegradeRule: 熔断降级规则
        - resource: 资源名
        - grade: 0-慢调用比例 1-异常比例 3-异常数
        - count
        - timeWindow: 熔断时长 s
        - minRequestAmount: 触发最小请求数(默认5)
        - statIntervalMs: 统计时长 ms(默认1000ms)
        - slowRatioThreshold: 慢调用比例阈值
    - ParamFlowRule: 热点规则
        - resource: 资源名
        - count: 限流阈值
        - grade: 1-QPS(默认) 0-并发线程
        - durationInSec: 统计窗口时间长度(默认1s)
        - controlBehavior: 0-直接拒绝(默认) / 1-WarmUp / 2-RateLimiter / 3-WarmUp + ReateLimiter
        - maxQueueingTimeMs: 最大排队等待时长
        - paramIdx: 热点参数索引
        - paramFlowitemList
        - clusterMode
        - clusterConfig
    - SystemRule: 默认都是-1不生效
        - highestSystemLoad
        - avgRt
        - maxThread
        - qps: 默认-1不生效
        - highestCpuUsage: 0-1.0(默认-1不生效)
    - AuthorityRule: 访问控制规则
        - resource: 资源名
        - limitApp: 对应的黑名单/白名单
        - stratey: 0-AUTHORITY_WHITE(默认) 1-AUTHORITY_BLACK
- 日志
    - 目录
        - ~/logs/csp(默认)
        - spring.cloud.sentinel.log.dir(spring cloud)
- 使用端口
    - 8719
        - 添加transport用来输出规则相关信息
            - http://localhost:8719/getRules?type=<XXXX> 已加载规则
            - http://localhost:8719/getParamRules 热点规则
            - curl http://localhost:8719/cnode?id=<资源名称>