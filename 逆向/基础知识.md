- 术语
    - ELF(Executable and Linkable Format): 可执行与可链接格式
    - 应用二进制接口(Application binary interface, ABI) = 调用约定 + 类型表示 + 名称修饰
- 函数调用约定
    - x86
        - 调用方清理栈
            - cdecl
                - 参数从右到左入栈
                - 返回值存放在EAX中
            - fastcall
                - 前两个参数
                    - ECX
                    - EDX
                - 其他参数从右到左入栈
                - 返回值存放在EAX中
        - 被调用方清理栈
            - stdcall(win32)
                - 参数从右往左入栈
                - 返回值存放在EAX中
                - 编译后的函数名后缀: "@" + 传递的函数参数所占的栈空间的字节长度
            - thiscall(C++)
                - this指针存放在ECX
                - 参数从右到左入栈
                - 返回值存放在EAX中
    - x86_64
        - fastcall(被调用者清理栈)
            - win64
                - 前四个参数
                    - RCX
                    - RDX
                    - R8
                    - R9
                - 其他参数从右到左入栈
                - 返回值放在RAX中
                - 调用方在栈上分配32字节的“shadow space”, 用于存放那四个存放调用参数的寄存器的值（亦即前四个调用参数）
            - linux64
        - thiscall(C++)
                - this指针存放在RCX
                - RDX、R8、R9
                - 参数从右到左入栈
                - 返回值存放在EAX中

PUSH EBP
MOV  EBP, ESP
...
MOV  ESP, EBP
POP  EBP


// func(int x, int y, int z)
push z
push y
push x
call func
add  esp, 12

mov [esp + 8], z
mov [esp + 4], y
mov [esp], x
call func

_stdcall 调用方 从右到左参数压入栈
被调用方清理栈

ret 12

fstcall

thiscall ECX this

ESP: 帧指针
EBP: 栈帧指针

push ebp
mov ebp, esp
sub esp, 12


mov esp, ebp
pop ebp
ret

leave
ret

ECX EDX EAX