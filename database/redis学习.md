# redis学习
- 一些命令
    - Pub/Sub
        - SUBSCRIBE channel / PSUBSCRIBE pattern
        - PUBLISH channel message
        - UNSUBSCRIBE channel / PUNSUBSCRIBE pattern
    - Transaction
        - MULTI
        - DISCARD
        - EXEC
    - Bits:
        - SETBIT key offset value
        - BITCOUNT key [start, end]
        - GETBIT key offset
    - Queues:
        - LPUSH / LPUSHX key ele
        - RPOP key / BRPOP key timeout
        - RPUSH / RPUSHX key ele
        - LPOP key / BLPOP key timeout
        - RPOPLPUSH / BRPOPLPUSH source destination timeout : 一进一出，用于安全的队列或循环队列
        - LINDEX key index
        - LLEN key
        - LRANGE key start stop
        - LSET key index element
        - LTRIM key start stop
        - LREM key count ele
    - Key-Value:
        - GET / DEL / EXISTS key
        - SET / SETNX / GETSET key value
        - SETX key seconds value
        - INCR / DECR key / DECRBY / INCRBY key increment
        - PERSIST key
        - RENAME / RENAMENX key newKey
        - EXPIRE key seconds / EXPIREAT key timestamp
    - Hash
        - HGET / HDEL / HEXISTS key field
        - HSET / HSETNX key field value
        - HGETALL key
        - HINCRBY key field increment
        - HKEYS key
        - HLEN key
    - Search
        - KEYS pattern: 禁用
        - SCAN cursor [MATCH pattern] [COUNT count] [TYPE type]
- 全局锁原理
    -  SET key value EX seconds NX
- 备份
    - 命令
        - save: 前台阻塞, 不再提供服务, 只进行快照持久化
        - bgsave: 后台异步非阻塞, fork创建子进程完成快照的持久化
    - 方式
        - RDB: 在指定的时间间隔内将内存中的数据集快照写入磁盘
        - AOF: 以日志的形式记录服务器所处理的每一个写、删除操作，查询操作不会记录
- 压测命令
    - redis-benchmark
    - -h <hostname>: Server hostname (default 127.0.0.1)
    - -p <port>: Server port (default 6379)
    - -s <socket>: Server socket (overrides host and port)
    - -a <password>: Password for Redis Auth
    - -c <clients>: Number of parallel connections (default 50)
    - -n <requests>: Total number of requests (default 100000)
    - -d <size>: Data size of SET/GET value in bytes (default 2)
    - --dbnum <db>: SELECT the specified db number (default 0)
    - -k <boolean>: 1=keep alive 0=reconnect (default 1)
    - -P <numreq>: Pipeline <numreq> requests. Default 1 (no pipeline).
    - -q: Quiet. Just show query/sec values
    - --csv: Output in CSV format
    - -l: Loop. Run the tests forever